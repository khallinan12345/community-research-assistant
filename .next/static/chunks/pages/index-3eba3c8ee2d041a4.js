(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9317)}])},9317:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var a=n(5893),s=n(7294),r=e=>{let{onComplete:t}=e,[n,r]=(0,s.useState)(0),[i,o]=(0,s.useState)({name:"",country:"",role:""}),[l,c]=(0,s.useState)(""),d=[{question:"Welcome to the Community Researcher. To begin, what is the name of your village or town?",field:"name",placeholder:"Enter village or town name...",buttonText:"Next"},{question:"Thank you. In which country is your village located?",field:"country",placeholder:"Enter country name...",buttonText:"Next"},{question:"What is your role in the community?",field:"role",placeholder:"E.g., Village elder, School teacher, Health worker...",buttonText:"Begin Research"},{complete:!0,message:"Thank you! We're ready to start researching and learning about your community."}],h=()=>{if(!l.trim())return;let e={...i,[d[n].field]:l};o(e),c(""),n<d.length-2?r(n+1):(r(n+1),setTimeout(()=>t(e),2e3))};return(0,a.jsx)("div",{className:"p-6 flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"max-w-3xl w-full bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 bg-blue-600 text-white",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Community Researcher"}),(0,a.jsx)("p",{className:"mt-2 opacity-90",children:"Empowering communities through collaborative research and dialogue"})]}),(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsx)("div",{className:"flex mb-8",children:d.map((e,t)=>(0,a.jsx)("div",{className:"h-2 ".concat(t===d.length-1?"rounded-r-full":""," ").concat(0===t?"rounded-l-full":""," flex-1 mx-1 ").concat(t<=n?"bg-blue-500":"bg-gray-200")},t))}),n<d.length-1?(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:d[n].question}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"text",className:"flex-1 border rounded-l-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:d[n].placeholder,value:l,onChange:e=>c(e.target.value),onKeyPress:e=>"Enter"===e.key&&h()}),(0,a.jsx)("button",{onClick:h,className:"bg-blue-600 text-white p-3 rounded-r-md hover:bg-blue-700",children:d[n].buttonText})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mt-4 mb-2",children:d[n].message}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["We'll be focusing on information about ",i.name,", ",i.country,"."]}),(0,a.jsx)("div",{className:"animate-pulse",children:(0,a.jsx)("p",{className:"text-blue-600",children:"Setting up your research assistant..."})})]})]}),i.name&&(0,a.jsx)("div",{className:"px-8 pb-6",children:(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-md",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Community Information:"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[i.name&&(0,a.jsxs)("li",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Village/Town:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-900",children:i.name})]}),i.country&&(0,a.jsxs)("li",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Country:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-900",children:i.country})]}),i.role&&(0,a.jsxs)("li",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Your Role:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-900",children:i.role})]})]})]})})]})})},i=n(7066);n(7712);let o="https://api.openai.com/v1/chat/completions",l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!e)return"";let s=e.replace(RegExp("^I'll create a research report based on.*?\\n\\n","s"),"").replace(RegExp("^Here's a comprehensive research summary.*?\\n\\n","s"),"").replace(RegExp("^Based on the search results provided.*?\\n\\n","s"),"").replace(RegExp("^As a development researcher.*?\\n\\n","s"),"").trim();if(!s.startsWith("#")&&t){let e=t.charAt(0).toUpperCase()+t.slice(1);return"# ".concat(e," in ").concat(n,", ").concat(a,"\n\n").concat(s)}return s.startsWith("#")?s:"# Research Report\n\n"+s},c="AIzaSyCJ2lUbdYnbKCbuc2ZYUMkw8x4x-uHjAWs",d="c32f854f4fabd416a",h=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n;n=t.messages&&Array.isArray(t.messages)?{model:"gpt-4o",messages:t.messages,max_completion_tokens:t.max_new_tokens||800,temperature:t.temperature||.5,top_p:t.top_p||.95,...t.parameters}:{model:"gpt-4o",messages:[{role:"user",content:e}],max_completion_tokens:t.max_new_tokens||1500,temperature:t.temperature||.5,top_p:t.top_p||.95,...t.parameters},console.log("Sending request to OpenAI model with payload:",{model:n.model,messages:n.messages.slice(0,1)});let a=await i.Z.post(o,n,{headers:{Authorization:"Bearer ".concat("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"),"Content-Type":"application/json"}});return console.log("OpenAI response status:",a.status),a.data.choices[0].message.content}catch(e){throw console.error("Error querying OpenAI model:",e),e.response&&(console.error("Error response data:",e.response.data),console.error("Error response status:",e.response.status)),Error("Failed to get response from AI model")}},m=async(e,t,n,a)=>{let s;let r=RegExp("SNIPPET: (.*?)(?=SOURCE|\\n\\nWrite|$)","gs"),i=[];for(;null!==(s=r.exec(e));)i.push(s[1].trim());let o=/SOURCE \d+: (.*?)(?=\nURL:)/g,l=[];for(;null!==(s=o.exec(e));)l.push(s[1].trim());let c=/URL: (.*?)(?=\nSNIPPET:)/g,d=[];for(;null!==(s=c.exec(e));)d.push(s[1].trim());console.log("Extracted snippets:",i.length),console.log("Extracted sources:",l.length),console.log("Extracted URLs:",d.length);let h=await v(t,n,i);return"# ".concat(t.charAt(0).toUpperCase()+t.slice(1)," in ").concat(n,", ").concat(a,"\n").concat(h)};function u(e){let t=e.match(/(^|\n)# .*[\s\S]*$/);if(t)return t[0].trim();let n=e.split(RegExp("Write a detailed analysis that:.+?format\\.","s"))[1];return n?n.trim():e}let p=async(e,t,n)=>{console.log("Search function called with:",{topic:e,communityName:t,countryName:n}),console.log("API Key available:",!0),console.log("Engine ID available:",!0);try{var a,s,r,o;let l=[];try{console.log("Attempting first search - village specific with quotes");let r=await i.Z.get("https://www.googleapis.com/customsearch/v1",{params:{key:c,cx:d,q:'"'.concat(t,'" ').concat(n," ").concat(e),num:5}});console.log("First search response received, info:",{totalResults:null===(a=r.data.searchInformation)||void 0===a?void 0:a.totalResults,hasItems:!!r.data.items,itemCount:(null===(s=r.data.items)||void 0===s?void 0:s.length)||0}),r.data.items&&r.data.items.length>0?(console.log("First search found results:",r.data.items.length),l=l.concat(r.data.items.map(e=>{var t,n;return{title:e.title,link:e.link,snippet:e.snippet||"",pagemap:e.pagemap,htmlSnippet:e.htmlSnippet,metatags:(null===(n=e.pagemap)||void 0===n?void 0:null===(t=n.metatags)||void 0===t?void 0:t[0])||{},source:"specific",confidence:"high",relevance:"village-specific"}}))):console.log("No results found in first search")}catch(e){console.warn("Error in specific village search:",e.message)}if(l.length<3)try{console.log("Attempting second search - village without quotes");let a=await i.Z.get("https://www.googleapis.com/customsearch/v1",{params:{key:c,cx:d,q:"".concat(t," ").concat(n," ").concat(e),num:5}});console.log("Second search response received, info:",{totalResults:null===(r=a.data.searchInformation)||void 0===r?void 0:r.totalResults,hasItems:!!a.data.items,itemCount:(null===(o=a.data.items)||void 0===o?void 0:o.length)||0}),a.data.items&&a.data.items.length>0?(console.log("Second search found results:",a.data.items.length),l=l.concat(a.data.items.map(e=>{var t,n;return{title:e.title,link:e.link,snippet:e.snippet||"",pagemap:e.pagemap,htmlSnippet:e.htmlSnippet,metatags:(null===(n=e.pagemap)||void 0===n?void 0:null===(t=n.metatags)||void 0===t?void 0:t[0])||{},source:"general-village",confidence:"medium-high",relevance:"general-village"}}))):console.log("No results found in second search")}catch(e){console.warn("Error in general village search:",e.message)}if(0===l.length)throw console.log("No search results found at all"),Error("No search results found for ".concat(e," in ").concat(t,", ").concat(n));console.log("Found ".concat(l.length," search results, proceeding with detailed analysis"));let p=l.slice(0,5).map((e,t)=>({...e,index:t+1,domainName:function(e){try{return new URL(e).hostname.replace(/^www\./,"")}catch(t){return e}}(e.link)})),g="You are analyzing search result snippets about ".concat(e," in ").concat(t,", ").concat(n,". Your task is to write a comprehensive, detailed research report.\n    \n    Search results:\n    ").concat(p.map(e=>"\n    SOURCE ".concat(e.index,":\n    TITLE: ").concat(e.title,"\n    URL: ").concat(e.link,"\n    SNIPPET: ").concat(e.snippet,"\n    ")).join("\n\n"),"\n    \n    Create a detailed research report that:\n    1. Thoroughly analyzes all available information about ").concat(e," in ").concat(t,"\n    2. Extracts specific data, statistics, and facts from the snippets\n    3. Makes reasonable inferences where information is limited\n    4. Organizes findings into coherent sections with clear headings\n    5. Cites sources using [Source X] format\n    \n    Your report MUST include:\n    - An overview section summarizing key findings\n    - 2-4 topic-specific sections analyzing different aspects\n    - A conclusion with implications or recommendations if possible\n    - Complete citations of all sources\n    \n    FORMAT:\n    # ").concat(e.charAt(0).toUpperCase()+e.slice(1)," in ").concat(t,", ").concat(n,"\n    \n    ## Overview\n    [Comprehensive overview]\n    \n    ## [First Aspect]\n    [Detailed analysis]\n    \n    ## [Second Aspect]\n    [Detailed analysis]\n    \n    [Additional sections as needed]\n    \n    ## References\n    [Numbered list of sources]\n    \n    The report should be written for development researchers who need comprehensive information. Make it substantive and informative.");console.log("Sending prompt to AI for detailed summaries");let x=await h(g,{max_new_tokens:2500,temperature:.3});if(x&&x[0]&&x[0].generated_text){console.log("AI summaries complete");let a=x[0].generated_text;console.log("Response length:",a.length);let s=u(a);if(s.startsWith("# "))return console.log("Extracted report with heading"),s;return console.log("Generating custom report from data"),m(a,e,t,n)}if("string"==typeof x){console.log("AI returned string response");let a=u(x);if(a.startsWith("# "))return a;return m(x,e,t,n)}throw console.log("Unable to generate summaries from AI response"),Error("Unable to generate summaries for ".concat(e," in ").concat(t,", ").concat(n))}catch(a){return console.error("Error in web search process:",a),"# ".concat(e.charAt(0).toUpperCase()+e.slice(1)," in ").concat(t,", ").concat(n,"\n\nWe were unable to generate detailed summaries due to technical issues.\n\nError: ").concat(a.message,"\n\nPlease try again later or try with alternative search terms.")}},g=async(e,t)=>{console.log("Generating comprehensive analysis of all research data");try{let n={},a="";if(Object.entries(t).forEach(e=>{let[t,s]=e;s.webResearch&&(n[t]=s.webResearch.split("\n").slice(0,5).join("\n"),a+="\n\n## ".concat(t.toUpperCase()," RESEARCH:\n").concat(s.webResearch.substring(0,1500),"...\n"))}),0===Object.keys(n).length)return"Insufficient research data available for comprehensive analysis. Please conduct research on more topics.";let s="You are a development research specialist analyzing data about ".concat(e.name,", ").concat(e.country,". Generate a comprehensive analysis report based on the following research data:\n\n").concat(a,"\n\nYour report should include:\n- A title: # Comprehensive Analysis of ").concat(e.name,", ").concat(e.country,"\n- Executive summary with key findings across all research areas\n- 3-5 cross-cutting themes that emerge from the research\n- Analysis of how different aspects of community life interact\n- 3-5 integrated recommendations that address multiple sectors\n- Knowledge gaps and suggested approaches\n\nUse markdown formatting with ## for section headers and * for bullet points.\nYour response should ONLY include the final report content without repeating these instructions.");console.log("Sending prompt to AI for comprehensive analysis");let r=await h(s,{max_new_tokens:3e3,temperature:.3}),i="";return r&&r[0]&&r[0].generated_text?(console.log("AI comprehensive analysis complete"),i=l(r[0].generated_text)):"string"==typeof r&&(i=l(r)),i}catch(t){return console.error("Error generating comprehensive analysis:",t),"# Comprehensive Analysis Error\n\nWe apologize, but an error occurred while generating the comprehensive analysis for ".concat(e.name,".\n\nPlease try again later or contact support if the problem persists.\n\nError details: ").concat(t.message)}},x=(e,t)=>{let n={demographics:[{name:"UN Population Division",url:"https://population.un.org/wpp/"},{name:"World Bank Data",url:"https://data.worldbank.org/country/"},{name:"UNICEF Data",url:"https://data.unicef.org/country/"}],agriculture:[{name:"FAO Country Profiles",url:"http://www.fao.org/countryprofiles/en/"},{name:"IFAD Rural Development Report",url:"https://www.ifad.org/en/web/knowledge/publications"},{name:"World Bank Agriculture Data",url:"https://data.worldbank.org/topic/agriculture-and-rural-development"}],power:[{name:"World Bank Sustainable Energy for All",url:"https://datacatalog.worldbank.org/dataset/sustainable-energy-all"},{name:"IRENA Renewable Energy Statistics",url:"https://www.irena.org/Statistics"},{name:"IEA Africa Energy Outlook",url:"https://www.iea.org/reports/africa-energy-outlook-2019"}],education:[{name:"UNESCO Institute for Statistics",url:"http://uis.unesco.org/"},{name:"Global Partnership for Education",url:"https://www.globalpartnership.org/where-we-work/"},{name:"World Bank Education Statistics",url:"https://datatopics.worldbank.org/education/"}],livelihoods:[{name:"ILO Country Profiles",url:"https://www.ilo.org/global/statistics-and-databases/lang--en/index.htm"},{name:"World Bank Poverty and Equity Data",url:"https://datatopics.worldbank.org/poverty/"},{name:"UNDP Human Development Reports",url:"http://hdr.undp.org/en/countries/"}],healthcare:[{name:"WHO Country Profiles",url:"https://www.who.int/countries/"},{name:"Global Health Data Exchange",url:"http://ghdx.healthdata.org/"},{name:"UNICEF Health Data",url:"https://data.unicef.org/topic/health/"}],political:[{name:"Bertelsmann Transformation Index",url:"https://www.bti-project.org/en/home.html"},{name:"Freedom House Reports",url:"https://freedomhouse.org/countries/freedom-world/scores"},{name:"International Crisis Group",url:"https://www.crisisgroup.org/africa/"}],food:[{name:"WFP Hunger Map",url:"https://www.wfp.org/hunger-map"},{name:"FAO Food Security Data",url:"http://www.fao.org/faostat/en/#home"},{name:"FEWS NET",url:"https://fews.net/"}],leadership:[{name:"Afrobarometer",url:"https://www.afrobarometer.org/"},{name:"Mo Ibrahim Foundation",url:"https://mo.ibrahim.foundation/iiag"},{name:"World Bank Governance Indicators",url:"https://info.worldbank.org/governance/wgi/"}]}[e]||[],a={Kenya:{base:{name:"Kenya National Bureau of Statistics",url:"https://www.knbs.or.ke/"},demographics:{name:"Kenya Population and Housing Census",url:"https://www.knbs.or.ke/census-2019/"},agriculture:{name:"Kenya Agricultural Research Institute",url:"https://www.kalro.org/"}},Tanzania:{base:{name:"Tanzania National Bureau of Statistics",url:"https://www.nbs.go.tz/"},demographics:{name:"Tanzania Population and Housing Census",url:"https://www.nbs.go.tz/index.php/en/census-surveys/population-and-housing-census"}},Uganda:{base:{name:"Uganda Bureau of Statistics",url:"https://www.ubos.org/"}},Ethiopia:{base:{name:"Ethiopia Central Statistical Agency",url:"https://www.statsethiopia.gov.et/"}},Rwanda:{base:{name:"National Institute of Statistics Rwanda",url:"https://www.statistics.gov.rw/"}},Nigeria:{base:{name:"National Bureau of Statistics Nigeria",url:"https://nigerianstat.gov.ng/"}},Ghana:{base:{name:"Ghana Statistical Services",url:"https://www.statsghana.gov.gh/"}},Senegal:{base:{name:"Agence Nationale de la Statistique et de la D\xe9mographie",url:"https://www.ansd.sn/"}}}[t]||null;return a&&(a.base&&n.unshift(a.base),a[e]&&n.unshift(a[e])),n},f=e=>({demographics:"Could you tell me about the population of your community? How many people live there?",agriculture:"What are the main agricultural activities in your community? What crops do people grow?",power:"What is the current situation regarding electricity and power in your community?",education:"Could you describe the education system and schools in your community?",livelihoods:"What are the main ways people earn a living in your community?",healthcare:"How do people access healthcare in your community? What facilities are available?",political:"Could you tell me about the political situation in your region? How stable is it?",food:"What is the food situation in your community? Do people have consistent access to adequate nutrition?",leadership:"Could you explain how leadership works in your community? Who makes decisions?"})[e]||"Could you tell me more about ".concat(e," in your community?"),y=e=>({demographics:"What are your community's hopes for population growth or stability? What challenges do you face in this area?",agriculture:"What are your community's aspirations for agriculture and animal production? What prevents achieving these goals?",power:"What are your hopes regarding electricity and power access? What obstacles prevent reaching these goals?",education:"What are your community's aspirations for education? What barriers prevent achieving these educational goals?",livelihoods:"What are your hopes for jobs and livelihoods in your community? What obstacles prevent economic development?",healthcare:"What are your community's aspirations for healthcare? What prevents achieving better health outcomes?",political:"What are your hopes regarding political stability and governance? What challenges exist in this area?",food:"What are your community's aspirations for food security? What prevents achieving consistent access to nutrition?",leadership:"What are your hopes for leadership development in your community? What challenges exist in this area?"})[e]||"What are your community's hopes and aspirations regarding ".concat(e,"? What prevents these aspirations from being realized?");async function v(e,t,n){let a=function(e,t,n){let a=e.toLowerCase();if("demographics"===a)return{model:"gpt-4o",messages:[{role:"system",content:"You are a helpful development research assistant."},{role:"user",content:"\nGenerate a detailed research report on demographics in ".concat(t,", Kenya based on the following snippets. The report must be comprehensive and written for development researchers.\n\nInclude the following sections:\n1. **Overview** – Summarize the key demographic characteristics.\n2. **Population Details** – Provide any available data on total population, orphan counts, age distribution, etc.\n3. **Organizational Structure** – Describe any relevant information on local leadership or community organizations related to demographics.\n\nAfter the main report, append a **Snippets** section that simply lists the raw snippet texts provided.\n\nUse Markdown formatting for clear headings and bullet points.\n\nSnippets:\n").concat(n.join("\n\n"),"\n\nDo not repeat these instructions in the final output; only include the final report.\n")}],max_tokens:4e3,temperature:.3,top_p:1};if("agriculture"===a)return{model:"gpt-4o",messages:[{role:"system",content:"You are a helpful development research assistant."},{role:"user",content:"\nGenerate a detailed research report on agriculture in ".concat(t,", Kenya based on the following snippets. The report must be comprehensive and written for development researchers.\n\nInclude the following sections:\n1. **Overview** – Summarize the key agricultural characteristics.\n2. **Agricultural Practices** – Describe details on crop production, farming methods, livestock rearing, and any sustainable techniques mentioned.\n3. **Challenges and Opportunities** – Highlight any challenges and potential opportunities for the agricultural sector.\n\nAfter the main report, append a **Snippets** section that lists the raw snippet texts.\n\nUse Markdown formatting for clear headings and bullet points.\n\nSnippets:\n").concat(n.join("\n\n"),"\n\nDo not repeat these instructions in the final output.\n")}],max_tokens:4e3,temperature:.3,top_p:1};if("education access"===a)return{model:"gpt-4o",messages:[{role:"system",content:"You are a helpful development research assistant."},{role:"user",content:"\nGenerate a detailed research report on education access in ".concat(t,", Kenya based on the following snippets. The report must be comprehensive and written for development researchers.\n\nInclude the following sections:\n1. **Overview** – Summarize the key findings regarding education access.\n2. **Educational Infrastructure** – Describe details on schools, enrollment rates, teacher availability, and any relevant educational initiatives.\n3. **Challenges and Opportunities** – Identify challenges to education access and potential areas for improvement.\n\nAfter the main report, append a **Snippets** section that lists the raw snippet texts.\n\nUse Markdown formatting for clear headings and bullet points.\n\nSnippets:\n").concat(n.join("\n\n"),"\n\nDo not repeat these instructions in the final output.\n")}],max_tokens:4e3,temperature:.3,top_p:1};if("healthcare access"===a)return{model:"gpt-4o",messages:[{role:"system",content:"You are a helpful development research assistant."},{role:"user",content:"\nGenerate a detailed research report on healthcare access in ".concat(t,", Kenya based on the following snippets. The report must be comprehensive and written for development researchers.\n\nInclude the following sections:\n1. **Overview** – Summarize the key findings regarding healthcare access.\n2. **Healthcare Facilities and Services** – Describe details on available health facilities, services provided, and public health initiatives.\n3. **Challenges and Opportunities** – Outline any challenges in accessing healthcare and potential opportunities for improvement.\n\nAfter the main report, append a **Snippets** section that lists the raw snippet texts.\n\nUse Markdown formatting for clear headings and bullet points.\n\nSnippets:\n").concat(n.join("\n\n"),"\n\nDo not repeat these instructions in the final output.\n")}],max_tokens:4e3,temperature:.3,top_p:1};if("food security"===a)return{model:"gpt-4o",messages:[{role:"system",content:"You are a helpful development research assistant."},{role:"user",content:"\nGenerate a detailed research report on food security in ".concat(t,", Kenya based on the following snippets. The report must be comprehensive and written for development researchers.\n\nInclude the following sections:\n1. **Overview** – Summarize the key findings regarding food security.\n2. **Food Availability and Nutrition** – Describe details on food production, distribution, and nutritional aspects.\n3. **Challenges and Interventions** – Identify any challenges to food security and potential interventions.\n\nAfter the main report, append a **Snippets** section that lists the raw snippet texts.\n\nUse Markdown formatting for clear headings and bullet points.\n\nSnippets:\n").concat(n.join("\n\n"),"\n\nDo not repeat these instructions in the final output.\n")}],max_tokens:4e3,temperature:.3,top_p:1};if("livelihood and jobs"===a)return{model:"gpt-4o",messages:[{role:"system",content:"You are a helpful development research assistant."},{role:"user",content:"\nGenerate a detailed research report on livelihoods and jobs in ".concat(t,", Kenya based on the following snippets. The report must be comprehensive and written for development researchers.\n\nInclude the following sections:\n1. **Overview** – Summarize the key findings regarding local livelihoods and employment.\n2. **Economic Activities and Job Opportunities** – Describe details on predominant industries, employment patterns, and any job creation initiatives.\n3. **Challenges and Opportunities** – Identify challenges in the local job market and potential areas for economic growth.\n\nAfter the main report, append a **Snippets** section that lists the raw snippet texts.\n\nUse Markdown formatting for clear headings and bullet points.\n\nSnippets:\n").concat(n.join("\n\n"),"\n\nDo not repeat these instructions in the final output.\n")}],max_tokens:4e3,temperature:.3,top_p:1};if("political stability"===a)return{model:"gpt-4o",messages:[{role:"system",content:"You are a helpful development research assistant."},{role:"user",content:"\nGenerate a detailed research report on political stability in ".concat(t,", Kenya based on the following snippets. The report must be comprehensive and written for development researchers.\n\nInclude the following sections:\n1. **Overview** – Summarize the key findings regarding political stability.\n2. **Governance and Civic Participation** – Describe details on local governance, civic engagement, and community participation.\n3. **Challenges and Insights** – Outline any political challenges and potential areas for improvement.\n\nAfter the main report, append a **Snippets** section that lists the raw snippet texts.\n\nUse Markdown formatting for clear headings and bullet points.\n\nSnippets:\n").concat(n.join("\n\n"),"\n\nDo not repeat these instructions in the final output.\n")}],max_tokens:4e3,temperature:.3,top_p:1};else return"leadership structures"!==a?{model:"gpt-4o",messages:[{role:"system",content:"You are a helpful development research assistant."},{role:"user",content:"\nGenerate a detailed research report on ".concat(e," in ").concat(t,", Kenya based on the following snippets. The report should be comprehensive and written for development researchers.\n\nInclude a clear overview and any key findings that emerge from the snippets.\n\nAfter the main report, append a **Snippets** section that lists the raw snippet texts provided.\n\nUse Markdown formatting for clear headings and bullet points.\n\nSnippets:\n").concat(n.join("\n\n"),"\n\nDo not repeat these instructions in the final output.\n")}],max_tokens:4e3,temperature:.3,top_p:1}:{model:"gpt-4o",messages:[{role:"system",content:"You are a helpful development research assistant."},{role:"user",content:"\nGenerate a detailed research report on leadership structures in ".concat(t,", Kenya based on the following snippets. The report must be comprehensive and written for development researchers.\n\nInclude the following sections:\n1. **Overview** – Summarize the key findings regarding leadership.\n2. **Leadership and Governance Structures** – Describe details on both traditional and formal leadership, decision-making processes, and community organization roles.\n3. **Challenges and Opportunities** – Identify challenges in the leadership dynamics and potential opportunities for enhanced governance.\n\nAfter the main report, append a **Snippets** section that lists the raw snippet texts.\n\nUse Markdown formatting for clear headings and bullet points.\n\nSnippets:\n").concat(n.join("\n\n"),"\n\nDo not repeat these instructions in the final output.\n")}],max_tokens:4e3,temperature:.3,top_p:1}}(e,t,n);try{return(await i.Z.post(o,a,{headers:{Authorization:"Bearer ".concat("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"),"Content-Type":"application/json"}})).data.choices[0].message.content}catch(e){throw console.error("Error generating report:",e),e}}let b=(e,t)=>"\nGenerate a detailed analysis of the assets related to ".concat(e," in ").concat(t,".\nInclude information on:\n- Local and national government programs,\n- NGOs or community initiatives,\n- Available funding or support mechanisms,\n- Local resources and any unique assets.\nThe report should be structured with clear headings and be written for development researchers.\n");var w=e=>{var t,n,r,i,o,l,c,d,m;let{villageInfo:u,onConversationUpdate:p,conversations:g,topics:x,completedTopics:y}=e,[v,b]=(0,s.useState)((null===(t=x[0])||void 0===t?void 0:t.id)||""),[w,j]=(0,s.useState)(""),[N,k]=(0,s.useState)(!1),A=(0,s.useRef)(null),S=()=>{var e;null===(e=A.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,s.useEffect)(()=>{S()},[g[v]]),(0,s.useEffect)(()=>{v&&(!g[v]||0===g[v].length)&&I(v)},[v,g]);let I=async e=>{k(!0);try{let t=f(e);p(e,[{role:"assistant",content:t}])}catch(n){console.error("Error initiating conversation:",n);let t="I'd like to learn more about ".concat(e," in ").concat(u.name,". Could you share some information about this?");p(e,[{role:"assistant",content:t}])}finally{k(!1)}},C=async()=>{if(!w.trim()||!v||N)return;let e=[...g[v]||[],{role:"user",content:w}];p(v,e),j(""),k(!0);try{var t;let n=await h("",{messages:[{role:"system",content:"You are an empathetic conversation partner speaking with a leader from ".concat(u.name,", ").concat(u.country,". \n                    Your goal is to gather specific information about ").concat((null===(t=x.find(e=>e.id===v))||void 0===t?void 0:t.title)||v," in their community.\n                    Ask thoughtful follow-up questions to get quantitative data where possible.\n                    Be respectful, supportive, and a good listener. Do not tell the leader what their community needs.\n                    Keep your responses fairly concise, focused on one specific question at a time.")},...e.map(e=>({role:e.role,content:e.content}))]}),a="";a=n&&n[0]&&n[0].generated_text?n[0].generated_text:"string"==typeof n?n:E(v,e);let s=[...e,{role:"assistant",content:a}];p(v,s)}catch(n){console.error("Error in conversation:",n);let t=E(v,e);p(v,[...e,{role:"assistant",content:t}])}finally{k(!1)}},E=(e,t)=>{let n=t.filter(e=>"user"===e.role).length,a=t[t.length-1].content.toLowerCase();return a.includes("already answered")||a.includes("just told you")||a.includes("i said")?"I apologize for any repetition. Thank you for that information. Would you like to tell me more about another aspect of ".concat(e," in ").concat(u.name,"?"):"demographics"===e?1===n?"Thank you for sharing that information. Could you tell me about the age distribution in ".concat(u.name,"? For example, is there a large proportion of children, working-age adults, or elderly people?"):2===n?"That's helpful to understand. Have there been any significant changes in the population over the past few years? For example, are people moving away to cities or are new people moving in?":"Thank you for sharing these details about ".concat(u.name,". This helps me understand your community better. Is there anything else important about the people and families in your village that would be helpful for me to know?"):"agriculture"===e?1===n?"Thank you for that information about agriculture. Do most families keep any livestock or animals? If so, what types and roughly what percentage of households have them?":2===n?"I see. Have you noticed any changes in agricultural productivity over recent years? Are harvests getting better, worse, or staying about the same?":"This information is very helpful. What would you say are the biggest challenges farmers in ".concat(u.name," face today?"):"Thank you for sharing that information about ".concat(e," in ").concat(u.name,". Could you tell me more about how this affects daily life in your community?")};return(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsxs)("div",{className:"w-1/4",children:[(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Conversation Topics"}),(0,a.jsx)("ul",{className:"space-y-2",children:x.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>b(e.id),className:"w-full text-left px-3 py-2 rounded-md ".concat(v===e.id?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:e.title}),y[e.id]&&(0,a.jsx)("span",{className:"h-2 w-2 bg-green-500 rounded-full"})]})})},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-4 mt-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Conversation Guide"}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,a.jsx)("p",{className:"mb-2",children:"• Ask one question at a time"}),(0,a.jsx)("p",{className:"mb-2",children:"• Listen more than you speak"}),(0,a.jsx)("p",{className:"mb-2",children:"• Seek specific details and examples"}),(0,a.jsx)("p",{className:"mb-2",children:"• Respect local knowledge and expertise"}),(0,a.jsx)("p",{children:"• Focus on strengths and opportunities"})]})]})]}),(0,a.jsx)("div",{className:"w-3/4",children:(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Conversation: ",(null===(n=x.find(e=>e.id===v))||void 0===n?void 0:n.title)||"Select a topic"]}),(0,a.jsxs)("div",{className:"px-3 py-1 rounded-full bg-blue-100 text-blue-800",children:["Speaking with: ",u.role]})]}),(0,a.jsx)("div",{className:"mb-4 p-3 bg-blue-50 rounded-md",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("span",{className:"font-medium",children:"Conversation purpose:"})," Gathering local knowledge about ",(null===(i=x.find(e=>e.id===v))||void 0===i?void 0:null===(r=i.title)||void 0===r?void 0:r.toLowerCase())||"this topic"," in ",u.name," directly from community leaders."]})}),(0,a.jsx)("div",{className:"h-96 overflow-y-auto mb-4 p-4 bg-gray-50 rounded-md",children:(null===(o=g[v])||void 0===o?void 0:o.length)>0?(0,a.jsxs)("div",{className:"space-y-4",children:[g[v].map((e,t)=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-3/4 rounded-lg p-3 ".concat("user"===e.role?"bg-blue-100 text-blue-900":"bg-gray-200 text-gray-900"),children:["assistant"===e.role&&(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"AI Researcher:"}),"user"===e.role&&(0,a.jsxs)("div",{className:"text-xs text-blue-500 mb-1",children:[u.role,":"]}),(0,a.jsx)("p",{children:e.content})]})},t)),(0,a.jsx)("div",{ref:A})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),(0,a.jsx)("p",{className:"text-gray-500 mb-2",children:"Starting conversation..."}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm max-w-md",children:["Preparing to discuss ",v," in ",u.name," with ",u.role,"."]})]})}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"text",className:"flex-1 border rounded-l-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Share information about ".concat((null===(l=x.find(e=>e.id===v))||void 0===l?void 0:l.title)||"this topic"," in ").concat(u.name,"..."),value:w,onChange:e=>j(e.target.value),onKeyPress:e=>"Enter"===e.key&&C(),disabled:N}),(0,a.jsx)("button",{onClick:C,disabled:N,className:"bg-blue-600 text-white p-3 rounded-r-md hover:bg-blue-700 disabled:opacity-50",children:N?"Sending...":"Send"})]}),(null===(c=g[v])||void 0===c?void 0:c.length)>0&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-green-50 rounded-md",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"How this information will be used:"}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Insights from this conversation will be combined with web research to create a comprehensive understanding of ",(null===(m=x.find(e=>e.id===v))||void 0===m?void 0:null===(d=m.title)||void 0===d?void 0:d.toLowerCase())||"this topic"," in ",u.name,". This helps ensure that any potential solutions are grounded in local reality and community priorities."]})]})]})})]})},j=e=>{var t,n,r,i,o,l,c;let{villageInfo:d,onResearchUpdate:h,researchData:m,topics:u,completedTopics:f}=e,[y,v]=(0,s.useState)((null===(t=u[0])||void 0===t?void 0:t.id)||""),[b,w]=(0,s.useState)(!1),[j,N]=(0,s.useState)(0),[k,A]=(0,s.useState)({}),[S,I]=(0,s.useState)(null),[C,E]=(0,s.useState)(!1),[R,D]=(0,s.useState)(!1),[T,W]=(0,s.useState)(""),_=u.length>0&&u.every(e=>f[e.id]);(0,s.useEffect)(()=>{(async()=>{if(_&&!R&&!T){E(!0);try{let e=await g(d,m);W(e),D(!0)}catch(e){console.error("Error generating comprehensive analysis:",e),I({title:"Unable to generate comprehensive analysis",message:e.message||"An error occurred while analyzing the research data."})}finally{E(!1)}}})()},[_,R,T,d,m]);let O=async()=>{if(!b&&y){w(!0),N(0),I(null);try{let e=setInterval(()=>{N(e=>{let t=e+3;return t<95?t:e})},300),t=x(y,d.country),n=await p(y,d.name,d.country);clearInterval(e),N(100),h(y,n),A(e=>({...e,[y]:t})),setTimeout(()=>{w(!1),N(0)},1e3),D(!1),W("")}catch(e){console.error("Error conducting research:",e),N(0),w(!1),I({title:"Unable to research ".concat(y),message:e.message||"Unable to complete the research. Please check your internet connection and try again."})}}},L=e=>{if(!e)return(0,a.jsx)("p",{children:"No research data available."});let t=e.split("\n").map((e,t)=>{if(e.startsWith("# "))return(0,a.jsx)("h1",{className:"text-2xl font-bold mt-4 mb-2",children:e.replace("# ","")},t);if(e.startsWith("## "))return(0,a.jsx)("h2",{className:"text-xl font-semibold mt-4 mb-2 text-gray-800",children:e.replace("## ","")},t);if(e.startsWith("### "))return(0,a.jsx)("h3",{className:"text-lg font-medium mt-3 mb-1 text-gray-700",children:e.replace("### ","")},t);if(e.startsWith("* "))return(0,a.jsx)("li",{className:"ml-4 mb-1",children:e.replace("* ","")},t);if(e.startsWith("  * "))return(0,a.jsx)("li",{className:"ml-8 mb-1",children:e.replace("  * ","")},t);if(e.includes("**")){if(e.includes("HIGH CONFIDENCE"))return(0,a.jsx)("p",{className:"mb-1 bg-green-50 p-1 border-l-4 border-green-500 pl-2",children:e.replace(/\*\*HIGH CONFIDENCE\*\*/,"")},t);if(e.includes("MEDIUM CONFIDENCE"))return(0,a.jsx)("p",{className:"mb-1 bg-yellow-50 p-1 border-l-4 border-yellow-500 pl-2",children:e.replace(/\*\*MEDIUM CONFIDENCE\*\*/,"")},t);{if(e.includes("LOWER CONFIDENCE"))return(0,a.jsx)("p",{className:"mb-1 bg-orange-50 p-1 border-l-4 border-orange-500 pl-2",children:e.replace(/\*\*LOWER CONFIDENCE\*\*/,"")},t);let n=e.split("**");return(0,a.jsx)("p",{className:"mb-1",children:n.map((e,t)=>t%2==0?e:(0,a.jsx)("strong",{children:e},t))},t)}}return""===e.trim()?(0,a.jsx)("div",{className:"h-2"},t):(0,a.jsx)("p",{className:"mb-1",children:e},t)});return(0,a.jsx)("div",{className:"markdown-content",children:t})},U=e=>{if(!e)return null;let t=e.indexOf("## Sources");if(-1===t)return null;let n=e.substring(t).replace("## Sources","").split("\n").filter(e=>e.trim().length>0&&(/^\d+\./.test(e.trim())||e.includes("http")||e.includes("www."))).map(e=>e.trim());return 0===n.length?null:(0,a.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,a.jsx)("h3",{className:"text-md font-semibold text-gray-800 mb-2",children:"Sources and References"}),(0,a.jsx)("ul",{className:"text-sm text-gray-600 space-y-1",children:n.map((e,t)=>{let n=e.match(/(https?:\/\/[^\s]+)/g);return n?(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsxs)("span",{className:"inline-block w-5 flex-shrink-0",children:[t+1,"."]}),(0,a.jsxs)("span",{children:[e.substring(0,e.indexOf(n[0])),(0,a.jsx)("a",{href:n[0],target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:n[0]}),e.substring(e.indexOf(n[0])+n[0].length)]})]},t):(0,a.jsxs)("li",{className:"flex items-start",children:[(0,a.jsxs)("span",{className:"inline-block w-5 flex-shrink-0",children:[t+1,"."]}),(0,a.jsx)("span",{children:e.replace(/^\d+\.\s/,"")})]},t)})})]})};return(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[_?(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Comprehensive Research Analysis"}),(0,a.jsx)("div",{className:"bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded",children:"AI Generated"})]}),C?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-purple-600 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Analyzing all research data..."}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Generating comprehensive insights across all research topics"})]}):T?(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,a.jsx)("div",{className:"research-content prose max-w-none",children:L(T)}),U(T)]}):(0,a.jsx)("div",{className:"bg-gray-100 p-4 rounded-md text-gray-700",children:(0,a.jsx)("p",{children:"Comprehensive analysis will be generated after all topics have been researched."})})]}):null,(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsxs)("div",{className:"w-1/4",children:[(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Research Topics"}),(0,a.jsx)("ul",{className:"space-y-2",children:u.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>v(e.id),className:"w-full text-left px-3 py-2 rounded-md ".concat(y===e.id?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:e.title}),f[e.id]&&(0,a.jsx)("span",{className:"h-2 w-2 bg-green-500 rounded-full"})]})})},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-4 mt-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-3",children:"Research Progress"}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"".concat(u.length>0?Object.keys(f).length/u.length*100:0,"%")}})}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[Object.keys(f).length," of ",u.length," topics researched"]}),_&&(0,a.jsx)("div",{className:"mt-4 p-2 bg-green-50 border border-green-200 rounded-md",children:(0,a.jsx)("p",{className:"text-sm text-green-800",children:"All topics have been researched. Comprehensive analysis is available."})})]}),k[y]&&k[y].length>0&&(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-4 mt-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-3",children:"Recommended Data Sources"}),(0,a.jsx)("ul",{className:"space-y-2 text-sm",children:k[y].map((e,t)=>(0,a.jsx)("li",{className:"border-b border-gray-100 pb-2 last:border-b-0 last:pb-0",children:(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline",children:e.name})},t))}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-3",children:["These sources may have additional information for ",d.name," or ",d.country,"."]})]}),f[y]&&(0,a.jsxs)("div",{className:"text-xs border border-gray-200 rounded-md p-2 mt-4",children:[(0,a.jsx)("h4",{className:"font-medium mb-1",children:"Confidence Level Guide:"}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 mr-2"}),(0,a.jsxs)("span",{children:["High Confidence - Data specific to ",d.name]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-yellow-500 mr-2"}),(0,a.jsx)("span",{children:"Medium Confidence - Data from the district/region"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-orange-500 mr-2"}),(0,a.jsx)("span",{children:"Lower Confidence - Country-level data"})]})]})]})]}),(0,a.jsx)("div",{className:"w-3/4",children:(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Research: ",(null===(n=u.find(e=>e.id===y))||void 0===n?void 0:n.title)||"Select a topic"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[f[y]&&(0,a.jsx)("button",{onClick:()=>window.print(),className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})}),(0,a.jsx)("button",{onClick:O,disabled:b||!y,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:b?"Researching...":f[y]?"Refresh Research":"Conduct Research"})]})]}),(0,a.jsx)("div",{className:"mb-6 p-3 bg-blue-50 rounded-md",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("span",{className:"font-medium",children:"Research context:"})," Using AI-powered web search to gather and analyze information about ",(null===(r=u.find(e=>e.id===y))||void 0===r?void 0:r.title)||"the selected topic"," in ",d.name,", ",d.country,"."]})}),S&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:[(0,a.jsx)("h3",{className:"font-medium text-red-800 mb-1",children:S.title}),(0,a.jsx)("p",{className:"text-sm text-red-700",children:S.message}),(0,a.jsx)("div",{className:"mt-3 flex justify-end",children:(0,a.jsx)("button",{onClick:()=>I(null),className:"text-xs text-red-700 hover:text-red-900",children:"Dismiss"})})]}),b&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:["Researching ",(null===(i=u.find(e=>e.id===y))||void 0===i?void 0:i.title)||"the selected topic","..."]}),(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:[j,"%"]})]}),(0,a.jsx)("div",{className:"w-full h-2 bg-gray-200 rounded-full",children:(0,a.jsx)("div",{className:"h-2 bg-blue-600 rounded-full",style:{width:"".concat(j,"%")}})}),(0,a.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Searching for village-specific information..."}),j>30&&(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Searching for district/regional data..."}),j>50&&(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Gathering country-level statistics..."}),j>70&&(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Searching official international sources..."}),j>85&&(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Analyzing findings with AI model..."})]})]}),f[y]?(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["AI-analyzed research for ",d.name,", ",d.country]})]}),(0,a.jsx)("div",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded",children:"Research Report"})]}),(0,a.jsx)("div",{className:"research-content prose max-w-none",children:L(null===(o=m[y])||void 0===o?void 0:o.webResearch)}),U(null===(l=m[y])||void 0===l?void 0:l.webResearch),(0,a.jsxs)("div",{className:"mt-6 pt-3 border-t border-gray-200 text-sm text-gray-500",children:[(0,a.jsxs)("p",{children:["Research data last updated: ",new Date().toLocaleDateString()]}),(0,a.jsx)("p",{className:"mt-1",children:"This report was generated using AI analysis of web search results. Data should be verified with local sources and experts for development planning."})]})]}):!b&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 21h7a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v11m0 5l4.879-4.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242z"})})}),(0,a.jsxs)("p",{className:"text-gray-500 mb-4",children:["No research conducted for ",(null===(c=u.find(e=>e.id===y))||void 0===c?void 0:c.title)||"this topic"," in ",d.name," yet."]}),(0,a.jsx)("p",{className:"text-gray-400 text-sm max-w-md",children:'Click the "Conduct Research" button to search the web for information about this topic in your village and country, and generate an AI-analyzed report.'})]}),(0,a.jsxs)("div",{className:"mt-6 p-3 bg-yellow-50 rounded-md",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"AI-Powered Research Methodology"}),(0,a.jsxs)("p",{className:"text-xs text-yellow-700",children:["This tool uses the openAI gpt-4o AI model to analyze web search results about ",d.name," in ",d.country,". If village-specific data isn't found, it will look for information at the district or country level. All information is analyzed, synthesized, and presented with clearly labeled confidence levels and linked citations where available."]}),(0,a.jsxs)("p",{className:"text-xs text-yellow-700 mt-1",children:[(0,a.jsx)("strong",{children:"Note:"})," After researching all topics, a comprehensive cross-topic analysis will be generated to identify patterns, connections, and strategic insights."]})]})]})})]})]})},N=e=>{var t;let{villageInfo:n,onAssetsUpdate:r,assetsData:i,topics:o,completedTopics:l}=e,[c,d]=(0,s.useState)((null===(t=o[0])||void 0===t?void 0:t.id)||""),[m,u]=(0,s.useState)(!1),[p,g]=(0,s.useState)(0),x=async()=>{if(!m&&c){u(!0),g(0);try{let e=setInterval(()=>{g(e=>Math.min(e+5,95))},300),t=b(c,n.name),a=await h(t,{max_new_tokens:800,temperature:.3});clearInterval(e),g(100);let s="";s=a&&a[0]&&a[0].generated_text?a[0].generated_text:"string"==typeof a?a:"The AI research came back with incomplete results. Please try again.",r(c,s),setTimeout(()=>{u(!1),g(0)},1e3)}catch(e){console.error("Error conducting assets research:",e),u(!1),g(0)}}};return(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsx)("div",{className:"w-1/4",children:(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Asset Categories"}),(0,a.jsx)("ul",{className:"space-y-2",children:o.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>d(e.id),className:"w-full text-left px-3 py-2 rounded-md ".concat(c===e.id?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:e.title}),l[e.id+"_assets"]&&(0,a.jsx)("span",{className:"h-2 w-2 bg-green-500 rounded-full"})]})})},e.id))})]})}),(0,a.jsx)("div",{className:"w-3/4",children:(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Assets Research: ",c]}),(0,a.jsx)("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:m?"Researching...":"Run Research"})]}),(0,a.jsx)("div",{className:"text-gray-700 prose prose-sm max-w-none",children:i[c]?(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:i[c].replace(/\n## /g,"<h2>").replace(/\n### /g,"<h3>").replace(/\n/g,"<br />")}}):(0,a.jsxs)("p",{children:["No assets data available for ",c,"."]})})]})})]})},k=e=>{var t,n,r,i,o,l,c,d;let{villageInfo:m,onAspirationsUpdate:u,conversations:p,topics:g,completedTopics:x,aspirationsData:f}=e,[v,b]=(0,s.useState)((null===(t=g[0])||void 0===t?void 0:t.id)||""),[w,j]=(0,s.useState)(""),[N,k]=(0,s.useState)(!1),A=(0,s.useRef)(null),S=e=>"".concat(e,"_aspirations"),I=S(v),C=p[I]||[],E=()=>{var e;null===(e=A.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,s.useEffect)(()=>{E()},[C]),(0,s.useEffect)(()=>{v&&(!p[I]||0===p[I].length)&&R(v)},[v,p,I]);let R=async e=>{k(!0);try{let t=y(e);u(S(e),[{role:"assistant",content:t}])}catch(n){console.error("Error initiating aspiration conversation:",n);let t="What are your community's hopes and aspirations regarding ".concat(e,"? What prevents these aspirations from being realized?");u(S(e),[{role:"assistant",content:t}])}finally{k(!1)}},D=async()=>{if(!w.trim()||!v||N)return;let e=[...C,{role:"user",content:w}];u(I,e),j(""),k(!0);try{var t;let n=await h("",{messages:[{role:"system",content:"You are an empathetic conversation partner speaking with a leader from ".concat(m.name,", ").concat(m.country,". \n                    Your goal is to understand the community's hopes, aspirations, and the challenges they face regarding ").concat((null===(t=g.find(e=>e.id===v))||void 0===t?void 0:t.title)||v,".\n                    Ask thoughtful questions about what they want for their community's future and what prevents them from achieving these goals.\n                    Be supportive and educational about possibilities without being prescriptive.\n                    Keep your responses fairly concise, focused on one specific question at a time.")},...e.map(e=>({role:e.role,content:e.content}))]}),a="";a=n&&n[0]&&n[0].generated_text?n[0].generated_text:"string"==typeof n?n:T(v,e);let s=[...e,{role:"assistant",content:a}];if(u(I,s),s.filter(e=>"user"===e.role).length>=1){let e=s.filter(e=>"user"===e.role).map(e=>e.content).join(" ");u(v,e),x[I]||(({...x})[I]=!0)}}catch(n){console.error("Error in aspiration conversation:",n);let t=T(v,e);u(I,[...e,{role:"assistant",content:t}])}finally{k(!1)}},T=(e,t)=>{let n=t.filter(e=>"user"===e.role).length;return 1===n?"Thank you for sharing those aspirations. What would you say are the main obstacles or challenges that prevent your community from achieving these goals related to ".concat(e,"?"):2===n?"I appreciate your insights about both the aspirations and challenges. Have there been any previous attempts to address these challenges? What worked or didn't work?":"Thank you for sharing these valuable perspectives. In your view, what would be the most important first step toward realizing your community's aspirations for ".concat(e,"?")};return(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsxs)("div",{className:"w-1/4",children:[(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Aspiration Areas"}),(0,a.jsx)("ul",{className:"space-y-2",children:g.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>b(e.id),className:"w-full text-left px-3 py-2 rounded-md ".concat(v===e.id?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:e.title}),x[S(e.id)]&&(0,a.jsx)("span",{className:"h-2 w-2 bg-green-500 rounded-full"})]})})},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-4 mt-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Aspirations Guide"}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,a.jsx)("p",{className:"mb-2",children:"• Focus on community hopes and dreams"}),(0,a.jsx)("p",{className:"mb-2",children:"• Identify obstacles to progress"}),(0,a.jsx)("p",{className:"mb-2",children:"• Understand previous attempts"}),(0,a.jsx)("p",{className:"mb-2",children:"• Respect local priorities"}),(0,a.jsx)("p",{children:"• Be supportive without being prescriptive"})]})]})]}),(0,a.jsx)("div",{className:"w-3/4",children:(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Aspirations: ",(null===(n=g.find(e=>e.id===v))||void 0===n?void 0:n.title)||"Select a topic"]}),(0,a.jsxs)("div",{className:"px-3 py-1 rounded-full bg-purple-100 text-purple-800",children:["Speaking with: ",m.role]})]}),(0,a.jsx)("div",{className:"mb-4 p-3 bg-purple-50 rounded-md",children:(0,a.jsxs)("p",{className:"text-sm text-purple-800",children:[(0,a.jsx)("span",{className:"font-medium",children:"Aspirations purpose:"})," Understanding community hopes, aspirations, and obstacles related to ",(null===(i=g.find(e=>e.id===v))||void 0===i?void 0:null===(r=i.title)||void 0===r?void 0:r.toLowerCase())||"this area"," in ",m.name,"."]})}),(0,a.jsx)("div",{className:"h-96 overflow-y-auto mb-4 p-4 bg-gray-50 rounded-md",children:(null==C?void 0:C.length)>0?(0,a.jsxs)("div",{className:"space-y-4",children:[C.map((e,t)=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-3/4 rounded-lg p-3 ".concat("user"===e.role?"bg-purple-100 text-purple-900":"bg-gray-200 text-gray-900"),children:["assistant"===e.role&&(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"AI Researcher:"}),"user"===e.role&&(0,a.jsxs)("div",{className:"text-xs text-purple-500 mb-1",children:[m.role,":"]}),(0,a.jsx)("p",{children:e.content})]})},t)),(0,a.jsx)("div",{ref:A})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,a.jsx)("p",{className:"text-gray-500 mb-2",children:"Starting aspirations conversation..."}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm max-w-md",children:["Preparing to discuss community hopes and aspirations for ",(null===(l=g.find(e=>e.id===v))||void 0===l?void 0:null===(o=l.title)||void 0===o?void 0:o.toLowerCase())||"this area"," in ",m.name,"."]})]})}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"text",className:"flex-1 border rounded-l-md p-3 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Share aspirations or challenges about ".concat((null===(d=g.find(e=>e.id===v))||void 0===d?void 0:null===(c=d.title)||void 0===c?void 0:c.toLowerCase())||"this area"," in ").concat(m.name,"..."),value:w,onChange:e=>j(e.target.value),onKeyPress:e=>"Enter"===e.key&&D(),disabled:N}),(0,a.jsx)("button",{onClick:D,disabled:N,className:"bg-purple-600 text-white p-3 rounded-r-md hover:bg-purple-700 disabled:opacity-50",children:N?"Sending...":"Send"})]}),(null==C?void 0:C.length)>0&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-purple-50 rounded-md",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"How aspirations will be used:"}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Understanding community aspirations and obstacles helps ensure that potential solutions align with local priorities and address the real challenges faced by ",m.name,". This information will be included in the final report to guide any development initiatives."]})]})]})})]})};let A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return{villageInfo:e,researchData:t,conversations:n,analysisData:a,assetsData:s,aspirationsData:r}},S=async e=>{let{villageInfo:t,researchData:n,conversations:a,analysisData:s,assetsData:r,aspirationsData:o}=e,l=t.name||"Unknown Village",c=t.country||"Unknown Country",d=t.role||"Community Expert",h="\nYou are a professional and scholarly report writer with expertise in assessing needs in rural African villages.\n\nAttached is a JSON file containing raw data collected from various phases of community development research for ".concat(l,", ").concat(c,". The local expert is a ").concat(d,".\n\nYour task is to synthesize this information into a professional, highly detailed community development report using a fully developed narrative style, ensuring that all data is contextualized and integrated rather than merely listed. The report should be structured logically and formatted for easy copying into Microsoft Word.\n\nThe content for each section must be drawn from the appropriate parts of the JSON file as follows:\n\nReport Sections & Data Sources\n1. Introduction\nIdentify the village, country, and local expert’s role.\nProvide context on why this assessment is essential, emphasizing how AI-driven education and instructional technology will play a transformative role in overcoming challenges and accelerating progress.\nIntroduce Nyumbani Village’s self-sustainability model and how AI-enhanced education will amplify its impact.\n2. Current State Analysis\nPresent a fully integrated and analytical picture of Nyumbani Village’s current conditions across:\n\nDemographics → (From researchData.demographics & conversations.demographics)\nAgriculture & Food Security → (From researchData.agriculture & conversations.agriculture)\nPower & Energy Access → (From researchData.power & conversations.power)\nEmployment & Livelihoods → (From researchData.livelihoods & conversations.livelihoods)\nEducation Access → (From researchData.education & conversations.education)\nHealthcare Services → (From researchData.healthcare & conversations.healthcare)\nPolitical Stability & Governance → (From researchData.political & conversations.political)\nFood Security → (From researchData.food & conversations.food)\nLeadership & Decision-Making → (From researchData.leadership & conversations.leadership)\nFor each area, explain how AI-driven education, training, and instructional technology can provide solutions and accelerate problem-solving.\n\n3. Research Findings and Comprehensive Analysis\nThis section documents the comprehensive analysis from the research. It should include subsections for each of the categories which follow using the specific data noted for each asset in the json file. Please write in continuous sentences. Bullet as appropriate for emphasis.\n* Cross-Cutting Themes → Identify patterns and dependencies across different development areas.\n*Interaction of Community Aspects → Explain how challenges in one area affect others and how AI-powered education can offer solutions.\n*Integrated Recommendations → Offer AI-enabled strategies for overcoming multiple challenges simultaneously.\n*Knowledge Gaps and Suggested Approaches → Highlight what areas need further research or AI-enhanced solutions.\n\n\n4. Assets and Available Resources\nThis section documents all current assets and infrastructure, evaluating how AI-enhanced instruction can maximize their use. It should include subsections for each of the categories which follow using the specific data noted for each asset in the json file. Please write in continuous sentences. Bullet as appropriate for emphasis. \n\n*Agricultural Assets → assetsData.agriculture\n*Power & Energy Assets → assetsData.power\n*Education & Training Facilities → assetsData.education\n*Livelihood & Economic Resources → assetsData.livelihoods\n*Healthcare Infrastructure → assetsData.healthcare\n*For each, explain how AI education can:\n\n\n\n5. Challenges and Community Aspirations\nThis section is very important. It should  be written in prose, with subsections for each category. \nUse aspirationsData to identify specific community goals in the following. Each of these categories should be written as a sub-section. For each section, explain  how AI-enhanced education can be a force multiplier in overcoming barriers and achieving community aspirations faster.\n\n*Demographics & Population Growth\n*Agricultural Production & Sustainability\n*Energy Expansion & Reliability\n*Job Creation & Livelihood Development\n*Education & Workforce Training\n*Healthcare & Well-Being\n*Food Security & Nutrition\n*Governance & Leadership Training\n\n6. Education and Capacity Building Recommendations\n⚡ This is the most important section ⚡\n✅ Each recommendation must be deeply detailed, justified, and focused on rapid impact.\n✅ AI-powered education must be at the core of these recommendations.\n✅ Each recommendation must answer:\n\nWhat exactly is being recommended?\nWhy is it essential based on research and aspirations?\nHow will it be implemented to achieve results rapidly?\nKey AI-Driven Recommendations for Nyumbani Village\n1. AI-Powered Agricultural Training & Climate-Smart Farming\n\nWhat: AI-driven training modules teaching precision irrigation, permaculture, biochar soil enhancement, and intercropping techniques suited to local conditions.\nWhy: Agricultural challenges due to water scarcity and soil degradation.\nHow: Implement AI-powered remote sensing & IoT-based farming education using smartphone apps and local AI mentors.\n2. AI-Enhanced Vocational Training for Livelihoods\n\nWhat: AI-driven job readiness programs for careers in solar energy maintenance, IT coding, carpentry, and eco-tourism.\nWhy: Lack of formal job training is a barrier to economic self-sufficiency.\nHow: Provide AI-personalized learning using adaptive learning platforms and VR-based trade skill simulations.\n3. AI-Facilitated Digital Literacy & Remote Work Training\n\nWhat: Establish AI-powered digital literacy hubs teaching coding, AI development, and remote freelancing.\nWhy: Expands employment opportunities beyond local markets.\nHow: Use AI tutors, project-based learning, and job-matching AI tools to connect trainees to global freelance platforms.\n4. AI-Powered Renewable Energy Workforce Development\n\nWhat: AI-driven training for solar panel maintenance, energy analytics, and grid management.\nWhy: Expanding solar infrastructure needs skilled local technicians.\nHow: Offer AI-interactive training modules, hands-on apprenticeships, and predictive AI analytics to optimize solar efficiency.\n5. AI-Based Healthcare Training & Local Medical Support\n\nWhat: AI-powered telemedicine & healthcare workforce training.\nWhy: Shortage of skilled healthcare workers & reliance on external aid.\nHow: Develop AI-driven diagnostic training, integrate localized health AI chatbots, and implement mobile-based medical education programs.\n7. Conclusion\nSummarize:\n\nHow AI-powered education will transform each development sector.\nThe necessity of integrated AI-based vocational, agricultural, and medical training.\nHow the community can achieve self-sufficiency and economic independence faster.\n\nBelow is the full JSON data:\n").concat(JSON.stringify(e,null,2),"\n\nNow, please generate the final report in plain text format.\n  ");try{return(await i.Z.post("https://api.openai.com/v1/chat/completions",{model:"gpt-4o",messages:[{role:"system",content:"You are a professional report writer."},{role:"user",content:h}],max_tokens:4500,temperature:.3,top_p:1},{headers:{Authorization:"Bearer ".concat("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"),"Content-Type":"application/json"}})).data.choices[0].message.content}catch(e){return console.error("Error generating final report:",e),"Error generating report. Please try again later."}},I=async(e,t,n,a,s,r)=>{try{let i=A(e,t,n,a,s,r);return await S(i)}catch(e){return console.error("Error generating comprehensive report:",e),"Error generating report. Please try again later."}};var C=e=>{let{villageInfo:t,researchData:n,conversations:r,analysisData:i,assetsData:o,aspirationsData:l}=e,[c,d]=(0,s.useState)("");return(0,s.useEffect)(()=>{(async()=>{try{let e=await I(t,n,r,i,o,l);d(e)}catch(e){console.error("Error generating report:",e),d("Error generating report. Please try again later.")}})()},[t,n,r,i,o,l]),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Final Community Development Report for ",t.name]}),c?(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:c}}):(0,a.jsx)("p",{children:"Generating final report..."}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-4",children:[(0,a.jsx)("button",{onClick:()=>{if(!c)return;let e=new Blob(['\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset="utf-8" />\n        <title>Final Report - '.concat(t.name,'</title>\n        <style>\n          body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }\n          h1, h2, h3 { margin-top: 20px; }\n        </style>\n      </head>\n      <body>\n        <pre style="white-space: pre-wrap;">').concat(c,"</pre>\n      </body>\n      </html>\n    ")],{type:"application/msword"}),n=document.createElement("a");n.href=URL.createObjectURL(e),n.download="".concat(t.name,"_Final_Report.doc"),document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout(()=>URL.revokeObjectURL(n.href),100)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Download Final Report"}),(0,a.jsx)("button",{onClick:()=>{let e=new Blob([JSON.stringify({villageInfo:t,researchData:n,conversations:r,analysisData:i,assetsData:o,aspirationsData:l},null,2)],{type:"application/json"}),a=document.createElement("a");a.href=URL.createObjectURL(e),a.download="".concat(t.name,"_raw_data.json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout(()=>URL.revokeObjectURL(a.href),100)},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Download Raw Data"})]})]})};let E=[{id:"demographics",title:"Demographics"},{id:"agriculture",title:"Agriculture & Animal Production"},{id:"power",title:"Power Availability"},{id:"education",title:"Education Access"},{id:"livelihoods",title:"Livelihoods & Jobs"},{id:"healthcare",title:"Healthcare Access"},{id:"political",title:"Political Stability"},{id:"food",title:"Food Stability"},{id:"leadership",title:"Leadership Structures"}],R=[{id:"agriculture",title:"Agriculture Assets"},{id:"power",title:"Power Assets"},{id:"education",title:"Education Assets"},{id:"livelihoods",title:"Livelihood Assets"},{id:"healthcare",title:"Healthcare Assets"}],D=[{id:"demographics",title:"Demographics Aspirations"},{id:"agriculture",title:"Agriculture Aspirations"},{id:"power",title:"Power Aspirations"},{id:"education",title:"Education Aspirations"},{id:"livelihoods",title:"Livelihood Aspirations"},{id:"healthcare",title:"Healthcare Aspirations"},{id:"political",title:"Political Aspirations"},{id:"food",title:"Food Aspirations"},{id:"leadership",title:"Leadership Aspirations"}];function T(){let[e,t]=(0,s.useState)(null),[n,i]=(0,s.useState)(!1),[o,l]=(0,s.useState)({}),[c,d]=(0,s.useState)({}),[h,m]=(0,s.useState)({}),[u,p]=(0,s.useState)({}),[g,x]=(0,s.useState)(""),[f,y]=(0,s.useState)({}),[v,b]=(0,s.useState)("introduction"),A=e=>{b(e)};return n?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsx)("header",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("h1",{className:"text-xl font-bold text-gray-900",children:["Community Researcher: ",null==e?void 0:e.name,", ",null==e?void 0:e.country]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{onClick:()=>A("conversation"),className:"px-3 py-2 text-sm font-medium rounded-md ".concat("conversation"===v?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"),children:"Conversations"}),(0,a.jsx)("button",{onClick:()=>A("research"),className:"px-3 py-2 text-sm font-medium rounded-md ".concat("research"===v?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"),children:"Research"}),(0,a.jsx)("button",{onClick:()=>A("assets"),className:"px-3 py-2 text-sm font-medium rounded-md ".concat("assets"===v?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"),children:"Assets"}),(0,a.jsx)("button",{onClick:()=>A("aspirations"),className:"px-3 py-2 text-sm font-medium rounded-md ".concat("aspirations"===v?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"),children:"Aspirations"}),(0,a.jsx)("button",{onClick:()=>A("report"),className:"px-3 py-2 text-sm font-medium rounded-md ".concat("report"===v?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"),children:"Report"})]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:["conversation"===v&&(0,a.jsx)(w,{villageInfo:e,onConversationUpdate:(e,t)=>{d(n=>({...n,[e]:t})),t.filter(e=>"user"===e.role).length>=3&&y(t=>({...t,[e]:!0}))},conversations:c,topics:E,completedTopics:f}),"research"===v&&(0,a.jsx)(j,{villageInfo:e,onResearchUpdate:(e,t)=>{l(n=>({...n,[e]:{webResearch:t}})),y(t=>({...t,[e]:!0}))},onAnalysisUpdate:e=>{x(e)},researchData:o,topics:E,completedTopics:f}),"assets"===v&&(0,a.jsx)(N,{villageInfo:e,onAssetsUpdate:(e,t)=>{p(n=>({...n,[e]:t})),y(t=>({...t,["".concat(e,"_assets")]:!0}))},assetsData:u,topics:R,completedTopics:f}),"aspirations"===v&&(0,a.jsx)(k,{villageInfo:e,onAspirationsUpdate:(e,t)=>{if(Array.isArray(t)){d(n=>({...n,[e]:t}));let n=t.filter(e=>"user"===e.role).map(e=>e.content).join(" ");if(n){let t=e.includes("_aspirations")?e.replace("_aspirations",""):e;m(e=>({...e,[t]:n}))}t.filter(e=>"user"===e.role).length>=1&&y(t=>({...t,[e]:!0}))}else{m(n=>({...n,[e]:t}));let n="".concat(e,"_aspirations");y(e=>({...e,[n]:!0}))}},conversations:c,topics:D,completedTopics:f,aspirationsData:h}),"report"===v&&(0,a.jsx)(C,{villageInfo:e,researchData:o,conversations:c,analysisData:g,assetsData:u,aspirationsData:h})]})]}):(0,a.jsx)(r,{onComplete:e=>{t(e),i(!0),b("conversation")}})}}},function(e){e.O(0,[477,888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);